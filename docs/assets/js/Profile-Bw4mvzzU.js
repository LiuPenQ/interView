import{An as i,Ct as n,Dt as S,Jt as g,Lt as d,Qt as _,St as f,Zt as U,_t as z,at as E,bt as t,ht as h,lt as V,n as u,ot as w,ut as B,yt as k}from"./index-CP-rJig6.js";var D={class:"p-6"},I={class:"rounded-lg shadow p-6",style:{"background-color":"var(--color-bg-primary)"}},L={class:"flex items-center gap-6 mb-8"},P={class:"w-20 h-20 rounded-full flex items-center justify-center",style:{"background-color":"var(--color-bg-tertiary)"}},T={class:"text-2xl font-bold",style:{color:"var(--color-text-secondary)"}},A={class:"text-xl font-semibold",style:{color:"var(--color-text-primary)"}},N={style:{color:"var(--color-text-secondary)"}},F={class:"space-y-4"},G={class:"flex justify-between items-center pb-4",style:{"border-bottom":"1px solid var(--color-border)"}},J={class:"flex justify-between items-center pb-4",style:{"border-bottom":"1px solid var(--color-border)"}},O={class:"flex justify-between items-center pb-4",style:{"border-bottom":"1px solid var(--color-border)"}},Q={key:0,style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0","background-color":"rgba(0, 0, 0, 0.5)",display:"flex","align-items":"center","justify-content":"center","z-index":"50"}},R={style:{"background-color":"white","border-radius":"8px","box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)",padding:"24px",width:"100%","max-width":"400px"}},Z={style:{"font-size":"18px","font-weight":"600","margin-bottom":"16px"}},q={key:0,style:{"margin-bottom":"16px"}},H={key:1,style:{"margin-bottom":"16px"}},K=S({__name:"Profile",setup(W){const C=V(),p=E(),l=k(()=>p.getters["user/currentUser"]),c=_(!1),r=_(""),M=k(()=>{switch(r.value){case"account":return"编辑账号设置";case"profile":return"编辑个人信息";case"notification":return"编辑通知设置";default:return"编辑设置"}}),o=U({username:"",email:""}),v=s=>{r.value=s,l.value&&(o.username=l.value.username||"",o.email=l.value.email||""),c.value=!0},b=()=>{c.value=!1,o.username="",o.email=""},$=(function(){var s=w(function*(){try{(r.value==="account"||r.value==="profile")&&(yield p.dispatch("user/updateUserInfo",o),u.success("更新成功")),b()}catch(e){console.error("更新失败:",e),u.error("更新失败，请稍后重试")}});return function(){return s.apply(this,arguments)}})(),j=(function(){var s=w(function*(){try{yield p.dispatch("user/logout"),u.success("退出登录成功"),C.push("/login")}catch(e){console.error("退出登录失败:",e),u.error("退出登录失败")}});return function(){return s.apply(this,arguments)}})();return(s,e)=>{var m,y,x;return d(),n("div",D,[e[12]||(e[12]=t("h1",{class:"text-2xl font-bold mb-6"},"我的",-1)),t("div",I,[t("div",L,[t("div",P,[t("span",T,i((((m=l.value)===null||m===void 0?void 0:m.username)||"U").charAt(0).toUpperCase()),1)]),t("div",null,[t("h2",A,i(((y=l.value)===null||y===void 0?void 0:y.username)||"用户名"),1),t("p",N,i(((x=l.value)===null||x===void 0?void 0:x.email)||"user@example.com"),1)])]),t("div",F,[t("div",G,[e[5]||(e[5]=t("span",{style:{color:"var(--color-text-primary)"}},"账号设置",-1)),t("button",{style:{color:"var(--color-primary)"},onClick:e[0]||(e[0]=a=>v("account"))},"编辑")]),t("div",J,[e[6]||(e[6]=t("span",{style:{color:"var(--color-text-primary)"}},"个人信息",-1)),t("button",{style:{color:"var(--color-primary)"},onClick:e[1]||(e[1]=a=>v("profile"))},"编辑")]),t("div",O,[e[7]||(e[7]=t("span",{style:{color:"var(--color-text-primary)"}},"通知设置",-1)),t("button",{style:{color:"var(--color-primary)"},onClick:e[2]||(e[2]=a=>v("notification"))},"编辑")]),t("div",{class:"flex justify-between items-center"},[e[8]||(e[8]=t("span",{style:{color:"var(--color-text-primary)"}},"退出登录",-1)),t("button",{style:{color:"#ef4444"},onClick:j},"退出")])])]),c.value?(d(),n("div",Q,[t("div",R,[t("h3",Z,i(M.value),1),t("form",{onSubmit:z($,["prevent"])},[r.value==="account"||r.value==="profile"?(d(),n("div",q,[e[9]||(e[9]=t("label",{style:{display:"block","font-size":"14px","font-weight":"500","margin-bottom":"4px"}},"用户名",-1)),g(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>o.username=a),style:{width:"100%",padding:"8px 12px",border:"1px solid #dcdfe6","border-radius":"4px"},placeholder:"输入用户名"},null,512),[[h,o.username]])])):f("",!0),r.value==="profile"?(d(),n("div",H,[e[10]||(e[10]=t("label",{style:{display:"block","font-size":"14px","font-weight":"500","margin-bottom":"4px"}},"邮箱",-1)),g(t("input",{type:"email","onUpdate:modelValue":e[4]||(e[4]=a=>o.email=a),style:{width:"100%",padding:"8px 12px",border:"1px solid #dcdfe6","border-radius":"4px"},placeholder:"输入邮箱"},null,512),[[h,o.email]])])):f("",!0),t("div",{style:{display:"flex","justify-content":"flex-end",gap:"12px","margin-top":"24px"}},[t("button",{type:"button",style:{padding:"8px 16px",border:"1px solid #dcdfe6","border-radius":"4px","background-color":"white",cursor:"pointer"},onClick:b},"取消"),e[11]||(e[11]=t("button",{type:"submit",style:{padding:"8px 16px",border:"1px solid var(--color-primary)","border-radius":"4px","background-color":"var(--color-primary)",color:"white",cursor:"pointer"}},"保存",-1))])],32)])])):f("",!0)])}}}),ee=B(K,[["__scopeId","data-v-a3ccc05b"]]);export{ee as default};
